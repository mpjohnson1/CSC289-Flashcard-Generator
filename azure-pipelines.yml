
# Python Django
# Test a Django project on multiple versions of Python.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
- main

pool:
  name: adoagent
  demands:
    - Agent.name -equals ip-172-31-93-85

stages:
  - stage: RunTests
    jobs:
      - job: RunTests
        workspace:
          clean: all
        steps:
          - checkout: self
          - script: |
              sudo apt install -y python3-pytest python3-pytest-django
              cd mysite/mysite
              pytest
            displayName: 'Run Tests'

# steps:
# - task: UsePythonVersion@0
#   inputs:
#     versionSpec: '$(PYTHON_VERSION)'
#     architecture: 'x64'



# - script: |
#     python manage.py test
#   displayName: 'Run tests'

# - task: PublishTestResults@2
#   inputs:
#     testResultsFiles: '**/TEST-*.xml'
#     testRunTitle: 'Python $(PYTHON_VERSION)'
#   condition: succeededOrFailed()
